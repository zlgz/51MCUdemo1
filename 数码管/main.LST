C51 COMPILER V9.57.0.0   MAIN                                                              12/29/2019 11:24:27 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Program Files\Keil\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg52.h>
   2          #include <intrins.h>
   3          /*
   4          **********************************************************************
   5          *                         本地宏定义
   6          **********************************************************************
   7          */
   8          #define DIG_PORT                P0              // 共阴极数码管段码经74HC573接P0端口
   9          
  10          /*
  11          **********************************************************************
  12          *                         本地全局变量
  13          **********************************************************************
  14          */
  15          sbit gA = P2^2;                                 // 38译码器输入口A
  16          sbit gB = P2^3;                                 // 38译码器输入口B
  17          sbit gC = P2^4;                                 // 38译码器输入口C
  18          
  19          /* 共阴数码管显示0-F的段码编码值，这些编码值可以向数码管供应商索取，也
  20             可以自己通过实验确定，实际工作中实验确定往往更方便也更准确   */
  21          unsigned char code gDuanMa[16]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,
  22                                                  0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};
  23          /*
  24          **********************************************************************
  25          *                         函数原型声明
  26          **********************************************************************
  27          */
  28          void Delay(void);
  29          void DigDisplay0(void);
  30          void DigDisplay1(void);
  31          void DigDisplay2(void);
  32          void DigDisplay3(void);
  33          void DigDisplay4(void);
  34          void DigDisplay5(void);
  35          void DigDisplay6(void);
  36          void DigDisplay7(void);
  37          
  38          void delay800ms(void);
  39          /*********************************************************************
  40          * 函 数 名       : main
  41          * 函数功能               : 主函数
  42          * 参数列表       : 无
  43          * 函数输出       : 无
  44          *********************************************************************/
  45          void main(void)
  46          {
  47   1              while (1)
  48   1              {
  49   2                      DigDisplay0();
  50   2                      delay800ms();
  51   2                      DigDisplay1();
  52   2                      delay800ms();
  53   2                      DigDisplay2();
  54   2                      delay800ms();
  55   2                      DigDisplay3();
C51 COMPILER V9.57.0.0   MAIN                                                              12/29/2019 11:24:27 PAGE 2   

  56   2                      delay800ms();
  57   2                      DigDisplay4();
  58   2                      delay800ms();
  59   2                      DigDisplay5();
  60   2                      delay800ms();
  61   2                      DigDisplay6();
  62   2                      delay800ms();
  63   2                      DigDisplay7();
  64   2                      delay800ms();
  65   2              }               
  66   1      }
  67          
  68          /*********************************************************************
  69          * 函 数 名       : DigDisplay0
  70          * 函数功能               : 数码管依次显示0-F
  71          *********************************************************************/
  72          void DigDisplay0(void)
  73          {
  74   1              unsigned char i = 0;
  75   1      
  76   1              // 首先确定位码，选中最左侧数码管，注意查38译码器的真值表
  77   1              gA = 0;
  78   1              gB = 0;
  79   1              gC = 0;
  80   1              // 依次显示0-F
  81   1              for (i=0; i<16; i++)
  82   1              {
  83   2                      DIG_PORT = gDuanMa[i];
  84   2                      //Delay();
  85   2                      delay800ms();
  86   2              }
  87   1                      
  88   1      }
  89          /*********************************************************************
  90          * 函 数 名       : DigDisplay1
  91          * 函数功能               : 数码管依次显示0-F
  92          *********************************************************************/
  93          void DigDisplay1(void)
  94          {
  95   1              unsigned char i = 0;
  96   1      
  97   1              // 首先确定位码，选中最左侧数码管，注意查38译码器的真值表
  98   1              gA = 1;
  99   1              gB = 0;
 100   1              gC = 0;
 101   1              // 依次显示0-F
 102   1              for (i=0; i<16; i++)
 103   1              {
 104   2                      DIG_PORT = gDuanMa[i];
 105   2                      //Delay();
 106   2                      delay800ms();
 107   2              }
 108   1                      
 109   1      }
 110          /*********************************************************************
 111          * 函 数 名       : DigDisplay0
 112          * 函数功能               : 数码管依次显示0-F
 113          * 参数列表       : 无
 114          * 函数输出       : 无
 115          *********************************************************************/
 116          void DigDisplay2(void)
 117          {
C51 COMPILER V9.57.0.0   MAIN                                                              12/29/2019 11:24:27 PAGE 3   

 118   1              unsigned char i = 0;
 119   1      
 120   1              // 首先确定位码，选中最左侧数码管，注意查38译码器的真值表
 121   1              gA = 0;
 122   1              gB = 1;
 123   1              gC = 0;
 124   1              // 依次显示0-F
 125   1              for (i=0; i<16; i++)
 126   1              {
 127   2                      DIG_PORT = gDuanMa[i];
 128   2                      //Delay();
 129   2                      delay800ms();
 130   2              }
 131   1                      
 132   1      }
 133          /*********************************************************************
 134          * 函 数 名       : DigDisplay0
 135          * 函数功能               : 数码管依次显示0-F
 136          * 参数列表       : 无
 137          * 函数输出       : 无
 138          *********************************************************************/
 139          void DigDisplay3(void)
 140          {
 141   1              unsigned char i = 0;
 142   1      
 143   1              // 首先确定位码，选中最左侧数码管，注意查38译码器的真值表
 144   1              gA = 1;
 145   1              gB = 1;
 146   1              gC = 0;
 147   1              // 依次显示0-F
 148   1              for (i=0; i<16; i++)
 149   1              {
 150   2                      DIG_PORT = gDuanMa[i];
 151   2                      //Delay();
 152   2                      delay800ms();
 153   2              }
 154   1                      
 155   1      }
 156          /*********************************************************************
 157          * 函 数 名       : DigDisplay0
 158          * 函数功能               : 数码管依次显示0-F
 159          * 参数列表       : 无
 160          * 函数输出       : 无
 161          *********************************************************************/
 162          void DigDisplay4(void)
 163          {
 164   1              unsigned char i = 0;
 165   1      
 166   1              // 首先确定位码，选中最左侧数码管，注意查38译码器的真值表
 167   1              gA = 0;
 168   1              gB = 0;
 169   1              gC = 1;
 170   1              // 依次显示0-F
 171   1              for (i=0; i<16; i++)
 172   1              {
 173   2                      DIG_PORT = gDuanMa[i];
 174   2                      //Delay();
 175   2                      delay800ms();
 176   2              }
 177   1                      
 178   1      }
 179          /*********************************************************************
C51 COMPILER V9.57.0.0   MAIN                                                              12/29/2019 11:24:27 PAGE 4   

 180          * 函 数 名       : DigDisplay0
 181          * 函数功能               : 数码管依次显示0-F
 182          * 参数列表       : 无
 183          * 函数输出       : 无
 184          *********************************************************************/
 185          void DigDisplay5(void)
 186          {
 187   1              unsigned char i = 0;
 188   1      
 189   1              // 首先确定位码，选中最左侧数码管，注意查38译码器的真值表
 190   1              gA = 1;
 191   1              gB = 0;
 192   1              gC = 1;
 193   1              // 依次显示0-F
 194   1              for (i=0; i<16; i++)
 195   1              {
 196   2                      DIG_PORT = gDuanMa[i];
 197   2                      //Delay();
 198   2                      delay800ms();
 199   2              }
 200   1                      
 201   1      }
 202          /*********************************************************************
 203          * 函 数 名       : DigDisplay0
 204          * 函数功能               : 数码管依次显示0-F
 205          * 参数列表       : 无
 206          * 函数输出       : 无
 207          *********************************************************************/
 208          void DigDisplay6(void)
 209          {
 210   1              unsigned char i = 0;
 211   1      
 212   1              // 首先确定位码，选中最左侧数码管，注意查38译码器的真值表
 213   1              gA = 0;
 214   1              gB = 1;
 215   1              gC = 1;
 216   1              // 依次显示0-F
 217   1              for (i=0; i<16; i++)
 218   1              {
 219   2                      DIG_PORT = gDuanMa[i];
 220   2                      //Delay();
 221   2                      delay800ms();
 222   2              }
 223   1                      
 224   1      }
 225          /*********************************************************************
 226          * 函 数 名       : DigDisplay0
 227          * 函数功能               : 数码管依次显示0-F
 228          * 参数列表       : 无
 229          * 函数输出       : 无
 230          *********************************************************************/
 231          void DigDisplay7(void)
 232          {
 233   1              unsigned char i = 0;
 234   1      
 235   1              // 首先确定位码，选中最左侧数码管，注意查38译码器的真值表
 236   1              gA = 1;
 237   1              gB = 1;
 238   1              gC = 1;
 239   1              // 依次显示0-F
 240   1              for (i=0; i<16; i++)
 241   1              {
C51 COMPILER V9.57.0.0   MAIN                                                              12/29/2019 11:24:27 PAGE 5   

 242   2                      DIG_PORT = gDuanMa[i];
 243   2                      //Delay();
 244   2                      delay800ms();
 245   2              }
 246   1                      
 247   1      }
 248          
 249          /*********************************************************************
 250          * 函 数 名       : Delay
 251          * 函数功能               : 延时一段时间
 252          * 参数列表       : 无
 253          * 函数输出       : 无
 254          *********************************************************************/
 255          void Delay(void)
 256          {
 257   1              unsigned char i = 0, j = 0, k = 0;
 258   1              
 259   1              for (i=0; i<50; i++)
 260   1                      for (j=0; j<50; j++)
 261   1                              for (k=0; k<100; k++);  
 262   1      }
 263          
 264          /*********************************************************************
 265          * 函 数 名       : delay800ms
 266          * 函数功能               : 用单片机小精灵V1.0自动生成的精确延时800ms的延时函数
 267          * 参数列表       : 无
 268          * 函数输出       : 无
 269          *********************************************************************/
 270          void delay800ms(void)   //误差 0us
 271          {
 272   1          unsigned char a,b,c;
 273   1          for(c=95;c>0;c--)
 274   1              for(b=138;b>0;b--)
 275   1                  for(a=29;a>0;a--);
 276   1          _nop_();  //if Keil,require use intrins.h
 277   1          _nop_();  //if Keil,require use intrins.h
 278   1      }
 279          //void delay800ms(void)   //误差 0us
 280          //{
 281          //    unsigned char a,b,c;
 282          //    for(c=19;c>0;c--)
 283          //        for(b=20;b>0;b--)
 284          //            for(a=130;a>0;a--);
 285          //}


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    298    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
